##

## 提交

​	流程的第一步, 是开发者向代码仓库提交代码. 所有的步骤都始于本地代码的一次提交



## 测试

​	代码仓库对commit操作配置了钩子(hook), 只要提交代码或者合并进主干, 就会跑自动化测试.

​	测试的种类:

 - 单元测试 针对函数和模块的测试
 - 继承测试 针对整体产品的某个功能的测试, 又称功能测试
 - 端对端的测试 从用户界面直达数据库的全链路测试



​	第一轮至少要跑单元测试



## 构建

​	通过第一轮测试, 代码就可以合并进主干, 就算可以交付了

​	交付后, 就先进行构建(build), 在进行第二轮测试. 所谓构建, 指的就是将源码转换为可以运行的实际代码, 比如安装依赖, 配置各种资源(样式表, JS脚本, 图片)等等



​	常用的构建工具:

 -  jenkins:

 -  Travis

 -  Codeship

 -  Strider

	Jenkins 和 Strider 是开源软件

	他们都会将构建和测试, 在一次运行中执行完成

	

## 测试 第二轮

​	构建完成, 就要进行第二轮测试, 如果第一轮已经涵盖了所以测试内容, 第二轮可以省略, 当然构建步骤也要移动到第一轮测试前面

​	第二轮是全面测试, 单元测试和继承测试都会跑, 有条件的话, 也要做端对端的测试. 所以测试以自动化为主, 少数无法自动化的测试用例, 就要人来跑



##  部署

​	通过了第二轮测试, 当前代码就是一个可以直接部署的版本(artifact), 将这个版本的所有文件打包(tar filename.tar *) 存档, 发到生产服务器

​	生产服务器将打包文件, 解包成本地的一个目录, 在将运行路径的符号链接(symlink)指向这个目录, 然后重新启动应用. 这方面的部署工具有Ansible, Chef, Puppet 等



## 回滚

​	一旦当前版本发生问题, 就要回滚到上一个版本的构建结果, 最简单的做法就是修改一下符号的链接. 指向上一个版本的目录

​	软连接

​	docker 版本











​	

​	